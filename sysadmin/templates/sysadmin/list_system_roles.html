{% extends "sysadmin/index.html" %}

{% load static %}


{% block content %}

{% include request.session.current_header %}


    <div class="row">

        <div class="col-12">
        <h4 class="page-title">
            System Roles</h4>

        
            <button class="btn btn-sm btn-info" data-bs-toggle="modal" data-bs-target="#add-role-div">
                <i class="fa fa-plus"></i> Add Role</button>
            </div>
   

    <div class="col-12 col-md-8" >

        <table class="table table-striped table-bordered">
            <thead>
                <tr><td>#</td><td>Role Name</td><td>Manage Rights</td>
                </tr>
            </thead>
            <tbody>
                {% for role in roles_list %}
                <tr>
                    <td>  
                        <span style="cursor: pointer;" class="btn-del" 
                        id="{{role.id}}-{{role.role_name}}" data-bs-toggle="modal" data-bs-target="#delete-role-div">
                        <i class="fa fa-trash text-danger"></i> Delete
                        </span>

                    </td>
                    <td>
                        <span data-bs-toggle="modal" data-bs-target="#edit-role-div" id="{{role.id}}-{{role.user_friendly_name}}"
                         class="btn btn-primary btn-sm btn-edit"><i class="fa fa-pencil"></i></span> 
                         {{role.role_name}}</td>
                        
                        <td> <a href="{% url 'sysadmin:list-role-rights' role.id %}" class="btn btn-success btn-sm">&#9776 Rights</a></td>
                        </tr>
                {% endfor %}
            </tbody>
        </table>
         
    </div>


    


    <div class="col-12">

        <div id="add-role-div" class="modal">
            <div id="add-role-div" class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <p>Add Role</p>
                    <p style="text-align: right;">
                    <i class="fa fa-times" data-bs-dismiss="modal" 
                    style="padding:10px; cursor: pointer; background-color:rgb(200,200,200); border-radius: 5px;"></i>
                    </p>
                </div>
                <div class="modal-body">

                    <form method="POST" action="{% url 'sysadmin:list-system-roles' %}" id="form-add-role">
                        {% csrf_token %}
                        <div style="margin-bottom: 5px;">
                        <label style="width:100%;">Role Name</label>
                        <input id="add-new-role" name="add-new-role" type="hidden" value="0"/>
                        <input style="width:100%;" id="role-name" type="text" name="role-name" required>
                        </div>
                        <button class="btn btn-primary btn-sm btn-add-role">Save</button>
                        <span class="btn btn-danger btn-sm" data-bs-dismiss="modal">Close</span>
                    </form>

                </div>
            </div>
          </div>
        </div>
       
        <div class="modal" id="edit-role-div">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header" style="margin-bottom: -10px;">
                        <p>Edit Role</p>&nbsp;
                        <p style="text-align: right;">
                        <i class="fa fa-times" data-bs-dismiss="modal" 
                        style="padding:10px; cursor: pointer; background-color:rgb(200,200,200); border-radius: 5px;"></i>
                        </p>
                        </div>
                    <div class="modal-body">
                      <form method="POST" action="{% url 'sysadmin:list-system-roles' %}" id="form-edit-div">
                        {% csrf_token %}
                        <div style="margin-bottom: 5px;">
                        <label style="width:100%;">Role Name</label>
                        <input id="edit-roleID" name="edit-roleID" type="hidden" />
                        <input style="width:100%;" id="edit-role-name" type="text" name="edit-role-name" i>
                        </div>
                        <button class="btn btn-primary btn-sm btn-edit-role">Save</button>
                        <button class="btn btn-danger btn-sm" data-bs-dismiss="modal">Close</button>
                    </form>
                    
                    </div>
                </div>
            </div>
        </div>



        
        <div class="modal" id="delete-role-div">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header" style="margin-bottom: -45px;">
                        <p>Delete Role</p>
                        <p style="text-align: right;">
                       &nbsp; <i class="fa fa-times" data-bs-dismiss="modal" 
                        style="padding:10px; cursor: pointer; background-color:rgb(200,200,200); border-radius: 5px;"></i>
                        </p>
                        </div>
                    <div class="modal-body">
                      <form method="POST" action="{% url 'sysadmin:list-system-roles' %}" id="form-edit-div">
                        {% csrf_token %}
                        <div style="margin-bottom: 5px;">
                        <label style="width:100%; margin-bottom: -5px;">Delete Role</label>
                        <input id="del-roleID" name="del-roleID" type="hidden" />
                        <input style="width:100%;" type="text" name="del-role-name" id="del-role-name">
                        </div>
                        <button class="btn btn-danger btn-sm del-btn-submit">Delete</button>
                        
                    </form>

                    <p style="text-align: right; margin-top: 30px;">
                        <button style="margin-top:-60px;" class="btn btn-success btn-sm" data-bs-dismiss="modal">Close</button>
                    </p>
                    
                    </div>
                </div>
            </div>

        </div>



    </div>

</form>

</div>

{% include request.session.current_footer %}

{% endblock %}